### 私有仓库

有时候使用 Docker Hub 这样的公共仓库可能不方便，我们可以创建一个本地仓库供私人使用。

[docker-registry](https://github.com/docker/docker-registry) 是官方提供的工具，可以用于构建私有的镜像仓库。

### 安装运行docker-registry

  * 容器安装运行(推荐)
 
    在安装了 Docker 后，可以通过获取官方 [registry](https://registry.hub.docker.com/_/registry/) 镜像来运行。
  ```shell
  docker pull registry:latest
  ```
  	运行registry，本机地址为192.168.30.144
  ```shell
  docker run -d -p 5000:5000 registry
  ```
  	启动后，可运行`curl http://192.168.30.1444:5000`，如打印`"\"docker-registry server\""`；或者用浏览器打开`http://192.168.30.1444:5000`，同样打印`docker-registry server`
  
  	**NOTE:默认情况下，仓库会被创建在容器的 /tmp/registry 下。可以通过 -v 参数来将镜像文件存放在本地的指定路径。 例如下面的例子将上传的镜像放到 /opt/data/registry 目录。**
  ```shell
  mkdir -p /opt/data/registry
  docker run -d -p 5000:5000 -v /opt/data/registry:/tmp/registry registry
  ```
  
  此外，还可以指定本地路径（如 /home/user/registry-conf ）下的配置文件。
  ```shell
  docker run \
  				-d -p 5000:5000 \
  				-v /home/user/registry-conf:/registry-conf \
  				-e DOCKER_REGISTRY_CONFIG=/registry-conf/config.yml \
  				registry
  ```
  关于registry配置文件的说明，请参看https://github.com/docker/docker-registry/blob/master/README.md
  
  我们也可以配置镜像存储到 Amazon S3 服务。
  ```shell
  docker run \
         -e SETTINGS_FLAVOR=s3 \
         -e AWS_BUCKET=acme-docker \
         -e STORAGE_PATH=/registry \
         -e AWS_KEY=AKIAHSHB43HS3J92MXZ \
         -e AWS_SECRET=xdDowwlK7TJajV1Y7EoOZrmuPEJlHYcNP2k4j49T \
         -e SEARCH_BACKEND=sqlalchemy \
         -p 5000:5000 \
         registry
  ```
  
  * 本地安装运行
  	
		待续...，可能就没有了   :smirk: 



 
  
